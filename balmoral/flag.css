.flag-outer {
  top: -20px;
  left: var(--balmoral-flag-left);
  position: relative;
  font-family: 'Ballet', cursive;
  color: #fffc;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 20px;
  perspective: 20em;
}

.flag {
  position: relative;
  width: 0; height: 28em;
  background-color: #fff;
  transform: rotateY(-15deg) scale(0.5);
  transform-style: preserve-3d;
}

.flap {
  position: absolute;
  top: 0; left: calc(100% - 1px);
  width: calc(1em + 1px); height: 9em;
  box-shadow: 0px 0px 1em #0003 inset;
  transform-style: preserve-3d;
  transform-origin: left;
  animation: flap 3s infinite ease-in-out;
}

.content {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  overflow: hidden;
  text-shadow: 0 0 0.5em #000;  
}

.content:before {
  content: 'Balmoral';
  position: absolute;
  bottom: 5%; 
  left: 0;
  width: 4em;
  text-align: center;
  font-size: 4em;
}

@keyframes flap {
  0%, 100% { transform: rotateY(calc(var(--v) * -1)); }
  50% { transform: rotateY(var(--v)); }
}

.pole {
  content: '';
  position: absolute;
  top: 0; right: 0;
  width: 1em; height: 100%;
  border-radius: 0 0 0.5em 0.5em / 0 0 0.3em 0.3em;
  background-image:
    linear-gradient(#7777, #6660, #555),
    linear-gradient(90deg, #777, #fff, #555); 
}

pole.before {
  content: '';
  position: absolute;
  top: 100%; left: 50%;
  width: 4em; height: 5em;
  transform: translate(-50%, -50%) rotateX(90deg);
  background-image: radial-gradient(#0004, #0000 60%);
}

pole.after {
  content: '';
  position: absolute;
  top: 0%; left: 50%;
  width: 1em; height: 0.4em;
  border-radius: 50%;
  transform: translate(-50%, -50%);
  background-image: radial-gradient(circle at top, #aaa, #333);
}


.flap {
    animation-delay: 0s;
    background-image: linear-gradient(90deg, #2d862d, #2d863c);
    --v: 0deg;
}

.content::before {
    left: 0em;
}

.flap > .flap {
    animation-delay: -0.375s;
    background-image: linear-gradient(90deg, #2d863c, #2d864a);
    --v: 2.5deg;
}

.flap > .flap .content::before {
    left: -0.25em;
}

.flap > .flap > .flap {
    animation-delay: -0.75s;
    background-image: linear-gradient(90deg, #2d864a, #2d8659);
    --v: 5deg;
}

.flap > .flap > .flap .content::before {
    left: -0.5em;
}

.flap > .flap > .flap > .flap {
    animation-delay: -1.125s;
    background-image: linear-gradient(90deg, #2d8659, #2d8668);
    --v: 7.5deg;
}

.flap > .flap > .flap > .flap .content::before {
    left: -0.75em;
}

.flap > .flap > .flap > .flap > .flap {
    animation-delay: -1.5s;
    background-image: linear-gradient(90deg, #2d8668, #2d8677);
    --v: 10deg;
}

.flap > .flap > .flap > .flap > .flap .content::before {
    left: -1em;
}

.flap > .flap > .flap > .flap > .flap > .flap {
    animation-delay: -1.875s;
    background-image: linear-gradient(90deg, #2d8677, #2d8686);
    --v: 12.5deg;
}

.flap > .flap > .flap > .flap > .flap > .flap .content::before {
    left: -1.25em;
}

.flap > .flap > .flap > .flap > .flap > .flap > .flap {
    animation-delay: -2.25s;
    background-image: linear-gradient(90deg, #2d8686, #2d7786);
    --v: 15deg;
}

.flap > .flap > .flap > .flap > .flap > .flap > .flap .content::before {
    left: -1.5em;
}

.flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap {
    animation-delay: -2.625s;
    background-image: linear-gradient(90deg, #2d7786, #2d6886);
    --v: 17.5deg;
}

.flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap .content::before {
    left: -1.75em;
}

.flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap {
    animation-delay: -3s;
    background-image: linear-gradient(90deg, #2d6886, #2d5986);
    --v: 20deg;
}

.flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap .content::before {
    left: -2em;
}

.flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap {
    animation-delay: -3.375s;
    background-image: linear-gradient(90deg, #2d5986, #2d4a86);
    --v: 22.5deg;
}

.flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap .content::before {
    left: -2.25em;
}

.flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap {
    animation-delay: -3.75s;
    background-image: linear-gradient(90deg, #2d4a86, #2d3c86);
    --v: 25deg;
}

.flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap .content::before {
    left: -2.5em;
}

.flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap {
    animation-delay: -4.125s;
    background-image: linear-gradient(90deg, #2d3c86, #2d2d86);
    --v: 27.5deg;
}

.flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap .content::before {
    left: -2.75em;
}

.flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap {
    animation-delay: -4.5s;
    background-image: linear-gradient(90deg, #2d2d86, #3c2d86);
    --v: 30deg;
}

.flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap .content::before {
    left: -3em;
}

.flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap {
    animation-delay: -4.875s;
    background-image: linear-gradient(90deg, #3c2d86, #4a2d86);
    --v: 32.5deg;
}

.flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap .content::before {
    left: -3.25em;
}

.flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap {
    animation-delay: -5.25s;
    background-image: linear-gradient(90deg, #4a2d86, #592d86);
    --v: 35deg;
}

.flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap .content::before {
    left: -3.5em;
}

.flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap {
    animation-delay: -5.625s;
    background-image: linear-gradient(90deg, #592d86, #682d86);
    --v: 37.5deg;
}

.flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap > .flap .content::before {
    left: -3.75em;
}
